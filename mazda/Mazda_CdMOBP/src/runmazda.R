runmazda <- function(x)
{
  if(!is.null(nrow(x)) && nrow(x) != 1) stop("runmazda input should be a vector") 
  lower_bounds = c(0.9, 0.3, 1.1, 0.35, 1.5, 0.5, 1.3, 1.7, 1.1, 0.7, 1.7, 0.5, 1.1, 1.3, 1.1, 1.3, 0.9, 1.1, 1.5, 0.9, 0.9, 0.5, 0.5, 0.9, 0.3, 0.4, 1.3, 0.6, 0.6, 0.4, 0.9, 0.6, 0.9, 0.7, 0.4, 1.5, 0.6, 0.3, 0.3, 0.6, 1.7, 0.9, 0.5, 1.3, 0.7, 0.7, 0.9, 1.3, 1.1, 1.3, 2.0, 1.7, 1.1, 0.9, 0.3, 0.6, 0.9, 1.1, 1.3, 0.3, 0.3, 1.3, 0.9, 1.1, 1.7, 1.5, 1.1, 0.9, 0.7, 1.1, 0.9, 1.7, 2.0, 0.5, 0.9, 0.3, 1.1, 0.35, 1.5, 0.5, 1.3, 1.7, 1.1, 0.7, 1.7, 0.5, 1.1, 1.3, 1.1, 1.3, 0.9, 1.1, 1.5, 0.9, 0.9, 0.5, 0.5, 0.9, 0.3, 0.4, 1.3, 0.6, 0.6, 0.4, 0.9, 0.6, 0.9, 0.7, 0.4, 1.5, 0.6, 0.3, 0.3, 0.6, 1.7, 0.9, 0.5, 1.3, 0.7, 0.7, 0.9, 1.3, 1.1, 1.3, 2.0, 1.7, 1.1, 0.9, 0.3, 0.6, 0.9, 1.1, 1.3, 0.3, 0.3, 1.3, 0.9, 1.1, 1.7, 1.5, 1.1, 0.9, 0.7, 1.1, 0.9, 1.7, 2.0, 0.5, 0.9, 0.3, 1.1, 0.35, 1.5, 0.5, 1.3, 1.7, 1.1, 0.7, 1.7, 0.5, 1.1, 1.3, 1.1, 1.3, 0.9, 1.1, 1.5, 0.9, 0.9, 0.5, 0.5, 0.9, 0.3, 0.4, 1.3, 0.6, 0.6, 0.4, 0.9, 0.6, 0.9, 0.7, 0.4, 1.5, 0.6, 0.3, 0.3, 0.6, 1.7, 0.9, 0.5, 1.3, 0.7, 0.7, 0.9, 1.3, 1.1, 1.3, 2.0, 1.7, 1.1, 0.9, 0.3, 0.6, 0.9, 1.1, 1.3, 0.3, 0.3, 1.3, 0.9, 1.1, 1.7, 1.5, 1.1, 0.9, 0.7, 1.1, 0.9, 1.7, 2.0, 0.5)
  upper_bounds = c(1.5, 0.95, 2.1, 1.0, 2.3, 2.1, 2.1, 2.3, 1.7, 1.5, 2.6, 1.3, 1.7, 1.9, 1.7, 1.9, 2.1, 1.9, 2.3, 1.5, 1.5, 1.1, 1.2, 2.1, 0.9, 1.0, 1.9, 1.3, 1.2, 1.7, 1.9, 1.3, 1.7, 1.3, 1.9, 2.3, 1.2, 0.9, 0.9, 1.2, 2.3, 1.7, 1.1, 1.9, 1.7, 2.1, 2.1, 2.1, 1.9, 2.1, 2.6, 2.3, 1.7, 2.1, 0.9, 1.3, 1.7, 1.9, 1.9, 1.3, 1.1, 1.9, 1.5, 1.7, 2.3, 2.1, 1.6, 1.7, 2.1, 1.9, 1.7, 2.3, 2.6, 1.3, 1.5, 0.95, 2.1, 1.0, 2.3, 2.1, 2.1, 2.3, 1.7, 1.5, 2.6, 1.3, 1.7, 1.9, 1.7, 1.9, 2.1, 1.9, 2.3, 1.5, 1.5, 1.1, 1.2, 2.1, 0.9, 1.0, 1.9, 1.3, 1.2, 1.7, 1.9, 1.3, 1.7, 1.3, 1.9, 2.3, 1.2, 0.9, 0.9, 1.2, 2.3, 1.7, 1.1, 1.9, 1.7, 2.1, 2.1, 2.1, 1.9, 2.1, 2.6, 2.3, 1.7, 2.1, 0.9, 1.3, 1.7, 1.9, 1.9, 1.3, 1.1, 1.9, 1.5, 1.7, 2.3, 2.1, 1.6, 1.7, 2.1, 1.9, 1.7, 2.3, 2.6, 1.3, 1.5, 0.95, 2.1, 1.0, 2.3, 2.1, 2.1, 2.3, 1.7, 1.5, 2.6, 1.3, 1.7, 1.9, 1.7, 1.9, 2.1, 1.9, 2.3, 1.5, 1.5, 1.1, 1.2, 2.1, 0.9, 1.0, 1.9, 1.3, 1.2, 1.7, 1.9, 1.3, 1.7, 1.3, 1.9, 2.3, 1.2, 0.9, 0.9, 1.2, 2.3, 1.7, 1.1, 1.9, 1.7, 2.1, 2.1, 2.1, 1.9, 2.1, 2.6, 2.3, 1.7, 2.1, 0.9, 1.3, 1.7, 1.9, 1.9, 1.3, 1.1, 1.9, 1.5, 1.7, 2.3, 2.1, 1.6, 1.7, 2.1, 1.9, 1.7, 2.3, 2.6, 1.3)
  scaled_x = lower_bounds + x * (upper_bounds - lower_bounds)

  write.table(t(scaled_x), file = "pop_vars_eval.txt", sep = "\t", row.names = FALSE, col.names = FALSE)
  system("./mazda_mop .")
  objectives = scan(file="pop_objs_eval.txt", quiet=TRUE)
  constraints = scan(file="pop_cons_eval.txt", quiet=TRUE)
  print(objectives[1])
  return(list(obj=objectives[1], c = -1.0 * constraints))
}